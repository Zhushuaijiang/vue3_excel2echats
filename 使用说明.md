# 📖 使用说明

## 🎯 项目功能总览

航空货运统计和分析软件 - 完整版已就绪！

## ✨ 核心功能

### 1️⃣ 数据看板
- **K线图**：展示最近6个月货运量波动（开盘/收盘/最高/最低）
- **趋势图**：展示最近30天货运趋势
- **历史数据**：点击图表查看详细信息

### 2️⃣ 表单配置
- **8个预置模版**：国际/国内货运单、仓储、航班、提货、转运、危险品、配送
- **自定义字段**：支持文本、数字、日期、选择类型
- **灵活管理**：增删改查配置

### 3️⃣ 数据录入
- **动态表单**：基于配置自动生成
- **数据管理**：查看、删除记录
- **模拟数据**：自动生成测试数据

### 4️⃣ 大屏展示
- **拖拽配置**：按住头部拖拽移动位置
- **实时刷新**：30秒/1分钟/5分钟自动更新
- **多种图表**：
  - 折线图：最近15天趋势
  - 柱状图：城市排名
  - 饼图：货物分布
- **全屏模式**：专业展示

### 5️⃣ AI生成
- **智能布局**：AI自动生成大屏配置
- **DeepSeek集成**：完整API支持
- **模板管理**：预设提示语

## 🚀 快速开始

### 首次使用

```bash
# 1. 安装依赖
npm install

# 2. 初始化数据（生成8个表单模版和模拟数据）
npm run init:all

# 3. 启动应用
npm run dev
```

### 配置AI功能（可选）

1. 复制配置示例：
```bash
copy electron\config.json.example electron\config.json
```

2. 编辑 `electron/config.json`，填入你的 DeepSeek API Key

3. 重启应用

## 📊 数据流程

### 数据来源
```
npm run init:all
    ↓
创建8个表单模版
    ↓
生成200-400条模拟数据
    ↓
存储到SQLite数据库
```

### 数据展示
```
数据库查询
    ↓
┌──────────┬──────────┬──────────┐
│ K线图    │ 趋势图   │ 历史数据 │
│ 6个月    │ 30天     │ 详细列表 │
└──────────┴──────────┴──────────┘
```

### 大屏刷新
```
定时刷新
    ↓
重新查询数据库
    ↓
更新图表数据
    ↓
自动重新渲染
```

## 🎮 操作指南

### 查看数据看板

1. 启动应用后进入首页
2. 左侧显示K线图（6个月数据）
3. 右侧显示趋势图（30天数据）
4. **点击图表**：弹出历史数据详情
5. **点击"刷新"**：重新加载最新数据

### 管理表单配置

1. 进入"表单配置"页面
2. 查看8个预置模版
3. 点击"新增配置"创建自定义表单
4. 添加字段并设置类型
5. 保存配置

### 录入数据

1. 进入"数据录入"页面
2. 选择表单模版
3. 填写表单内容
4. 提交保存
5. 在列表中查看所有记录

### 配置大屏

#### 添加组件
1. 进入"大屏展示"
2. 点击"配置大屏"
3. 从左侧拖拽组件到中间区域
4. 组件会自动加载真实数据

#### 调整位置
1. **按住组件头部**（标题栏）
2. 拖拽到目标位置
3. 松手完成移动

#### 调整大小
1. 点击组件头部的 ⛶ 按钮
2. 输入新宽度（百分比）
3. 自动保持宽高比

#### 保存布局
1. 调整完成点击"保存布局"
2. 下次打开自动恢复

### 使用AI生成

1. 点击"AI生成"按钮
2. 选择AI模板
3. 输入需求描述
4. 设置生成数量（1-6个）
5. 点击"生成"
6. AI自动创建布局

### 全屏展示

1. 配置好大屏布局
2. 点击"全屏显示"
3. 进入全屏模式
4. 按ESC退出

## 📈 数据说明

### 模拟数据

自动生成的数据包括：
- **时间范围**：最近90天
- **城市**：10个主要城市
- **货物类型**：电子产品、服装、食品、医药等
- **重量范围**：100-5100 kg
- **航班**：各大航空公司

### 图表数据

- **K线图**：按月份统计数据
- **趋势图**：按日期统计数据
- **柱状图**：按城市统计数据
- **饼图**：按货物类型统计

## 🛠️ 常用命令

```bash
# 开发
npm run dev                   # 启动开发服务器

# 初始化
npm run init:all              # 一键初始化（表单+数据）
npm run init:forms            # 仅初始化表单
npm run init:data             # 仅生成数据

# 构建
npm run build                 # 构建前端
npm run build:electron        # 构建Electron应用

# 修复
npm run rebuild:native        # 重建原生模块
npm run install:electron      # 重新安装Electron

# 辅助
npm run preview               # 预览构建结果
```

## 📍 文件位置

### 数据库
- Windows: `%APPDATA%\air-cargo-analytics\cargo_data.db`
- macOS: `~/Library/Application Support/air-cargo-analytics/cargo_data.db`

### 配置文件
- AI配置: `electron/config.json`

### 日志输出
- 主进程: 终端窗口
- 渲染进程: 浏览器控制台（F12）

## 🔧 常见问题

### 数据未显示？

1. 确认已运行 `npm run init:all`
2. 检查数据库文件是否存在
3. 点击"刷新"重新加载

### 图表为空？

1. 检查是否有数据记录
2. 进入"数据录入"查看记录
3. 删除并重新初始化

### 大屏无法拖拽？

1. 确保按住**头部标题栏**区域
2. 不要在图表内容区拖拽
3. 检查浏览器控制台错误

### AI生成失败？

1. 检查 `electron/config.json` 是否存在
2. 确认API Key是否正确
3. 检查网络连接
4. 查看终端错误日志

## 📚 完整文档

- [SETUP.md](./SETUP.md) - 完整设置指南
- [DATA_INIT_GUIDE.md](./DATA_INIT_GUIDE.md) - 数据初始化
- [AI_CONFIG_GUIDE.md](./AI_CONFIG_GUIDE.md) - AI配置
- [完成总结.md](./完成总结.md) - 功能总结
- [UPDATE_LOG.md](./UPDATE_LOG.md) - 更新日志
- [README.md](./README.md) - 项目简介

## 🎉 开始使用

```bash
# 完整流程
npm install          # 安装依赖
npm run init:all     # 初始化数据
npm run dev          # 启动应用
```

**祝您使用愉快！** 🚀

