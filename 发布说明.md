# 程序发布说明

## 构建命令

```bash
npm run build:electron
```

或者直接使用：

```bash
npm run build && npm run electron:compile && npm run rebuild:native && npx electron-builder
```

## 构建产物位置

构建完成后，安装包位于：

- **NSIS 安装程序**: `dist/航空货运分析软件 Setup 1.0.0.exe`
- **未打包的应用**: `dist/win-unpacked/航空货运分析软件.exe`

## 发布文件

### 主要文件

1. **安装程序**: `dist/航空货运分析软件 Setup 1.0.0.exe`
   - 这是标准的 Windows 安装程序
   - 用户可以运行此文件进行安装
   - 支持选择安装目录

### 分发方式

您可以通过以下方式分发程序：

1. **直接分发安装程序**
   - 将 `dist/航空货运分析软件 Setup 1.0.0.exe` 分发给用户
   - 用户双击运行即可安装

2. **压缩包分发**
   - 可以将 `dist/win-unpacked` 目录压缩成 ZIP 文件
   - 用户解压后可直接运行 `航空货运分析软件.exe`

## 注意事项

### 代码签名

当前构建配置已跳过代码签名（`sign: false`），安装时可能会显示：
- "Windows 已保护你的电脑"
- "来自未知发布者"

这是正常的，因为程序没有经过代码签名。如果用户点击"仍要运行"即可继续安装。

### 应用程序图标

目前使用默认 Electron 图标。如需自定义图标：

1. 准备一个 256x256 像素的 ICO 文件
2. 将文件命名为 `icon.ico`
3. 放置到 `build/` 目录
4. 取消注释 `electron-builder.yml` 中的 `icon: build/icon.ico`

### 版本号

版本号在 `package.json` 中的 `version` 字段定义，当前为 `1.0.0`。

更新版本号：
```json
{
  "version": "1.0.1"  // 修改这里
}
```

## 已知问题

### winCodeSign 警告

构建过程中可能会出现关于 darwin（macOS）符号链接的警告，这不会影响 Windows 构建结果，可以忽略。

### better-sqlite3 重建

如果在构建时遇到 `better-sqlite3` 相关的错误：

1. 确保没有 Electron 进程正在运行
2. 运行 `npm run rebuild:native` 手动重建
3. 如果仍有问题，删除 `node_modules` 并重新安装

## 安装测试

建议在发布前：

1. 在不同的 Windows 版本上测试安装程序
2. 测试应用程序的所有主要功能
3. 确认数据库文件可以正常创建和访问

## 更新日志

当前版本：1.0.0

### 功能特性

- ✅ 表单配置管理
- ✅ 数据录入和编辑
- ✅ Excel 导入（单文件和批量）
- ✅ 数据看板（可配置图表）
- ✅ 大屏展示
- ✅ AI 表单生成

